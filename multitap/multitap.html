<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three Container</title>
    <link rel="stylesheet" href="Multi-tap.css">
    
</head>
<body>
    <div class="overall">
        <div class="container">
            <!-- Tank-1 -->
            <div id="tank-1">
                <div id="water-1"></div>
            </div>
            
            <!-- Tank-2 -->
            <div id="tank-2">
                <div id="water-2"></div>
            </div>
            
            <!-- Tank-3 -->
            <div id="tank-3">
                <div id="water-3"></div>
            </div>
            
        </div>
        <!-- Pipe-1 -->
        <div class="pipe-1">
            <div class="rect-1"></div>
            <div class="square-1"></div>
            <!-- Tap- On/Off -->
            <button id="tap-1" onclick="openTap()"></button> 
        </div>
        
        <!-- Pipe-2 -->
        <div class="pipe-2"> 
            <div class="rect-2"></div>
            <div class="square-2"></div>
            <!-- Tap- On/Off -->
            <button id="tap-2" onclick="openPipe()"></button>
            
        </div>
        
        <!-- Pipe-3 -->
        <div class="pipe-3">
            <div class="rect-3"></div>
            <div class="square-3"></div>
            <!-- Tap- On/Off -->
            <button id="tap-3" onclick="tapOpen()"></button>
            
        </div>
        <div class="waters">
            <div id="waterFlow-1"></div>
            <div id="waterFlow-2"></div>
            <div id="waterFlow-3"></div>
            
        </div>
        <div id="holder">
            <div id="river"></div>
        </div>
    </div>

    <script>

        // Container-1
        var store=document.getElementById("holder")
        var storingWater=document.getElementById("river")
        var liq=0
        var topMargin=300
        

        var h2o=document.getElementById("water-1")
        var pipe=document.getElementById("tap-1")
        var flowing=document.getElementById("waterFlow-1")

        var tapStatus="OFF"
        var flow="ON"

        var level=400
        var space=0

        flowing.style.display="none"

        function openTap(){
            if(tapStatus=="OFF"){
                pipe.style.background="green"
                tapStatus="ON"

                if(level>0){
                    flowing.style.display="block"
                    var interval=setInterval(function(){
                    level=level-1
                    space=space+1
                    h2o.style.height=level+"px"
                    h2o.style.marginTop=space+"px"
                
                    if(level==0 || space==400 || flow=="OFF"){
                    clearInterval(interval);
                    flowing.style.display="none"
                    flow="ON"
                }
                },50)     
            }
            
            // STORING WATER
            if(flow=="ON"|| tapStatus=="ON"){
                storingWater.style.display="block"
                storingWater.style.borderBottomLeftRadius="10px"
                storingWater.style.borderBottomRightRadius="10px"

                    var intervalWater=setInterval(function(){
                        liq=liq+1
                        topMargin=topMargin-1
                        storingWater.style.background="skyblue"
                        storingWater.style.height=liq+"px"
                        storingWater.style.marginTop=topMargin+"px"

                        if(flow=="OFF" ||tapStatus=="OFF" ||level==0 || space==400 ){
                            clearInterval(intervalWater);
                            flow="ON"
                        }
                    },500)  
            }  
        }
         
        else if(tapStatus="ON"){
            pipe.style.background="red"
            tapStatus="OFF"
            flow="OFF"
            flowing.style.display="none"
        }
    }

    // Container-2
    var firstH2o=document.getElementById("water-2")
    var firstPipe=document.getElementById("tap-2")
    var firstFlowing=document.getElementById("waterFlow-2")

    var firstLevel= 400
    var firstSpace=0

    firstFlowing.style.display="none"

    var click="OFF"
    var dec="ON"

    function openPipe(){
        if(click=="OFF"){
            firstPipe.style.backgroundColor="green"
            click="ON"

            if(firstLevel>0){
                firstFlowing.style.display="block"
                var intervalId=setInterval(function(){
                    firstLevel=firstLevel-1
                    firstSpace=firstSpace+1
                    firstH2o.style.height=firstLevel+"px"
                    firstH2o.style.marginTop=firstSpace+"px"   
                    
                    if(firstLevel==0 || firstSpace==400 ||dec=="OFF"){
                        clearInterval(intervalId);
                        dec="ON"
                        firstFlowing.style.display="none"
                    }
                },50)
            }

            // STORING WATER
            if(dec=="ON"|| click=="ON"){
                storingWater.style.display="block"
                storingWater.style.borderBottomLeftRadius="10px"
                storingWater.style.borderBottomRightRadius="10px"

                    var intervalWater=setInterval(function(){
                        liq=liq+1
                        topMargin=topMargin-1
                        storingWater.style.background="skyblue"
                        storingWater.style.height=liq+"px"
                        storingWater.style.marginTop=topMargin+"px"

                        if(dec=="OFF" ||click=="OFF" ||firstLevel==0 || firstSpace==400){
                            clearInterval(intervalWater);
                            flow="ON"
                        }
                    },500)  
            }
        }
        else if(click=="ON"){
            firstPipe.style.backgroundColor="red"
            click="OFF"
            dec="OFF"
            firstFlowing.style.display="none"
        }
    }

    // Container-3

    var water=document.getElementById("water-3")
    var tap=document.getElementById("tap-3")
    var liquid=document.getElementById("waterFlow-3")

    var touchStatus="OFF"
    var moving="ON"

    var limit=400
    var empty=0

    liquid.style.display="none"

    function tapOpen(){
        if(touchStatus=="OFF"){
            tap.style.background="green"
            touchStatus="ON"

            if(limit>0){
                liquid.style.display="block"
                var int=setInterval(function(){
                    limit=limit-1
                    empty=empty+1
                    water.style.height=limit+"px"
                    water.style.marginTop=empty+"px"

                    if(limit==0 || empty==400 || moving=="OFF"){
                        clearInterval(int)
                        moving="ON"
                        liquid.style.display="none"
                    }
                },50)
            }

            // STORING WATER
            if(moving=="ON"|| touchStatus=="ON"){
                storingWater.style.display="block"
                storingWater.style.borderBottomLeftRadius="10px"
                storingWater.style.borderBottomRightRadius="10px"

                    var intervalWater=setInterval(function(){
                        liq=liq+1
                        topMargin=topMargin-1
                        storingWater.style.background="skyblue"
                        storingWater.style.height=liq+"px"
                        storingWater.style.marginTop=topMargin+"px"

                        if(moving=="OFF" ||touchStatus=="OFF" || limit==0 || empty==400){
                            clearInterval(intervalWater);
                            flow="ON"
                        }
                    },500)  
            }
        }
        else if(touchStatus=="ON"){
            tap.style.background="red"
            moving="OFF"
            liquid.style.display="none"
            touchStatus="OFF"
        }
    }
    </script>
</body>
</html>